# Há»‡ Thá»‘ng Bá» Phiáº¿u Phi Táº­p Trung Sá»­ Dá»¥ng Blockchain Ethereum

#### Há»‡ thá»‘ng bá» phiáº¿u phi táº­p trung sá»­ dá»¥ng Blockchain Ethereum lÃ  má»™t giáº£i phÃ¡p an toÃ n vÃ  minh báº¡ch Ä‘á»ƒ tá»• chá»©c cÃ¡c cuá»™c báº§u cá»­. Táº­n dá»¥ng cÃ´ng nghá»‡ blockchain cá»§a Ethereum, há»‡ thá»‘ng nÃ y Ä‘áº£m báº£o há»“ sÆ¡ bá» phiáº¿u khÃ´ng thá»ƒ bá»‹ giáº£ máº¡o, cho phÃ©p ngÆ°á»i dÃ¹ng bá» phiáº¿u tá»« xa trong khi váº«n duy trÃ¬ tÃ­nh áº©n danh vÃ  ngÄƒn cháº·n gian láº­n. KhÃ¡m phÃ¡ dá»± Ã¡n sÃ¡ng táº¡o nÃ y Ä‘á»ƒ cÃ³ quy trÃ¬nh bá» phiáº¿u Ä‘Ã¡ng tin cáº­y vÃ  phi táº­p trung.
#### For a cool demo of this project watch this [YouTube video](https://www.youtube.com/watch?v=a5CJ70D2P-E).
#### For more details checkout [Project Report](https://github.com/Krish-Depani/Decentralized-Voting-System-Using-Ethereum-Blockchain/blob/main/Project%20Report%20github.pdf).
#### PS: This project is not maintained anymore.

## TÃ­nh nÄƒng
- Triá»ƒn khai JWT Ä‘á»ƒ xÃ¡c thá»±c vÃ  á»§y quyá»n cá»­ tri an toÃ n.
- Sá»­ dá»¥ng blockchain Ethereum Ä‘á»ƒ lÆ°u trá»¯ káº¿t quáº£ bá» phiáº¿u minh báº¡ch vÃ  khÃ´ng thá»ƒ giáº£ máº¡o.
- Loáº¡i bá» nhu cáº§u vá» trung gian, Ä‘áº£m báº£o quy trÃ¬nh bá» phiáº¿u Ä‘Ã¡ng tin cáº­y.
- Báº£ng Ä‘iá»u khiá»ƒn quáº£n trá»‹ Ä‘á»ƒ quáº£n lÃ½ á»©ng cá»­ viÃªn, thiáº¿t láº­p ngÃ y bá» phiáº¿u vÃ  theo dÃµi káº¿t quáº£.
- Giao diá»‡n ngÆ°á»i dÃ¹ng trá»±c quan Ä‘á»ƒ cá»­ tri bá» phiáº¿u vÃ  xem thÃ´ng tin á»©ng cá»­ viÃªn.

## YÃªu cáº§u
- Node.js (phiÃªn báº£n â€“ 18.14.0)
- Metamask
- Python (phiÃªn báº£n â€“ 3.9)
- FastAPI
- XAMPP vá»›i MySQL (cá»•ng â€“ 3306)
- Ganache (mÃ´i trÆ°á»ng blockchain cá»¥c bá»™)
- TrÃ¬nh duyá»‡t web hiá»‡n Ä‘áº¡i (Chrome, Firefox, Edge)

## Screenshots

![Login Page](https://github.com/Krish-Depani/Decentralized-Voting-System-Using-Ethereum-Blockchain/blob/main/public/login%20ss.png)

![Admin Page](https://github.com/Krish-Depani/Decentralized-Voting-System-Using-Ethereum-Blockchain/blob/main/public/admin%20ss.png)

![Voter Page](https://github.com/Krish-Depani/Decentralized-Voting-System-Using-Ethereum-Blockchain/blob/main/public/index%20ss.png)

## CÃ i Ä‘áº·t

1. Má»Ÿ terminal.

2. Clone repository báº±ng lá»‡nh
        
        git clone https://github.com/Krish-Depani/Decentralized-Voting-System-Using-Ethereum-Blockchain.git

3. Táº£i vÃ  cÃ i Ä‘áº·t [Ganache](https://trufflesuite.com/ganache/).

4. Táº¡o workspace cÃ³ tÃªn <b>developement</b>, trong pháº§n truffle projects, thÃªm `truffle-config.js` báº±ng cÃ¡ch nháº¥p vÃ o nÃºt `ADD PROJECT`.

5. Táº£i extension [Metamask](https://metamask.io/download/) cho trÃ¬nh duyá»‡t.

6. Táº¡o vÃ­ (náº¿u báº¡n chÆ°a cÃ³), sau Ä‘Ã³ nháº­p tÃ i khoáº£n tá»« Ganache.

7. ThÃªm máº¡ng vÃ o Metamask. (TÃªn máº¡ng - Localhost 7575, RPC URl - http://localhost:7545, Chain ID - 1337, KÃ½ hiá»‡u tiá»n tá»‡ - ETH)

8. CÃ i Ä‘áº·t vÃ  cáº¥u hÃ¬nh XAMPP:
   - Táº£i vÃ  cÃ i Ä‘áº·t [XAMPP](https://www.apachefriends.org/download.html)
   - Khá»Ÿi Ä‘á»™ng XAMPP Control Panel
   - Báº¯t Ä‘áº§u cÃ¡c dá»‹ch vá»¥ Apache vÃ  MySQL
   - Má»Ÿ phpMyAdmin báº±ng cÃ¡ch truy cáº­p http://localhost/phpmyadmin

9. Táº¡o cÆ¡ sá»Ÿ dá»¯ liá»‡u trong phpMyAdmin:
   - Táº¡o cÆ¡ sá»Ÿ dá»¯ liá»‡u má»›i cÃ³ tÃªn <b>voter_db</b>
   - Trong cÆ¡ sá»Ÿ dá»¯ liá»‡u Ä‘Ã£ táº¡o, táº¡o báº£ng má»›i cÃ³ tÃªn <b>voters</b> vá»›i Ä‘á»‹nh dáº¡ng sau:

           CREATE TABLE voters (
           voter_id VARCHAR(36) PRIMARY KEY NOT NULL,
           role ENUM('admin', 'user') NOT NULL,
           password VARCHAR(255) NOT NULL
           );

10. ThÃªm dá»¯ liá»‡u máº«u vÃ o báº£ng voters:
    - ThÃªm tÃ i khoáº£n admin:
      ```sql
      INSERT INTO voters (voter_id, role, password) VALUES ('admin123', 'admin', 'admin123');
      ```
    - ThÃªm tÃ i khoáº£n ngÆ°á»i dÃ¹ng:
      ```sql
      INSERT INTO voters (voter_id, role, password) VALUES ('user123', 'user', 'user123');
      ```

11. Cáº­p nháº­t thÃ´ng tin káº¿t ná»‘i cÆ¡ sá»Ÿ dá»¯ liá»‡u trong file `./Database_API/.env`:
    ```
        MYSQL_USER="root"
        MYSQL_PASSWORD=""
        MYSQL_HOST="localhost"
        MYSQL_DB="voter_db"
        SECRET_KEY="d2b861a623b1d0e89f7c91c313bce1db34fbce8356ca80cf38b72e4c5a832ed5f0fa7136ef0ed5c32641308daa88c29c108d85835afcf37e5385c8e2c4cacee6"
    ```

12. CÃ i Ä‘áº·t truffle toÃ n cá»¥c
    
        npm install -g truffle

13. Äi Ä‘áº¿n thÆ° má»¥c gá»‘c cá»§a repo vÃ  cÃ i Ä‘áº·t cÃ¡c module node

        npm install

14. CÃ i Ä‘áº·t cÃ¡c thÆ° viá»‡n phá»¥ thuá»™c cá»§a Python

        pip install fastapi mysql-connector-python pydantic python-dotenv uvicorn uvicorn[standard] PyJWT

15. CÃ i Ä‘áº·t http-server (náº¿u chÆ°a cÃ³)

        npm install --save-dev http-server

## Sá»­ dá»¥ng

1. Má»Ÿ terminal táº¡i thÆ° má»¥c dá»± Ã¡n

2. Má»Ÿ Ganache vÃ  workspace <b>development</b>.

3. Má»Ÿ terminal trong thÆ° má»¥c gá»‘c cá»§a dá»± Ã¡n vÃ  cháº¡y lá»‡nh

        truffle console
   sau Ä‘Ã³ biÃªn dá»‹ch cÃ¡c há»£p Ä‘á»“ng thÃ´ng minh vá»›i lá»‡nh

        compile
   thoÃ¡t khá»i truffle console

4. ÄÃ³ng gÃ³i app.js vá»›i browserify
    
        browserify ./src/js/app.js -o ./src/dist/app.bundle.js

5. Khá»Ÿi Ä‘á»™ng mÃ¡y chá»§ node
    
        node index.js

6. Äiá»u hÆ°á»›ng Ä‘áº¿n thÆ° má»¥c `Database_API` trong má»™t terminal khÃ¡c
    
        cd Database_API
    sau Ä‘Ã³ khá»Ÿi Ä‘á»™ng mÃ¡y chá»§ cÆ¡ sá»Ÿ dá»¯ liá»‡u báº±ng lá»‡nh sau

        uvicorn main:app --reload --host 127.0.0.1

7. Trong má»™t terminal má»›i, triá»ƒn khai há»£p Ä‘á»“ng truffle vÃ o blockchain cá»¥c bá»™
    
        truffle migrate --reset

8. Äáº£m báº£o XAMPP Ä‘ang cháº¡y vá»›i cÃ¡c dá»‹ch vá»¥ Apache vÃ  MySQL hoáº¡t Ä‘á»™ng

Báº¡n Ä‘Ã£ hoÃ n táº¥t! á»¨ng dá»¥ng Bá» phiáº¿u sáº½ hoáº¡t Ä‘á»™ng táº¡i http://localhost:3000/.

## Xá»­ lÃ½ sá»± cá»‘

1. **Lá»—i káº¿t ná»‘i Metamask**:
   - Äáº£m báº£o Metamask Ä‘Ã£ Ä‘Æ°á»£c cÃ i Ä‘áº·t vÃ  má»Ÿ khÃ³a
   - Kiá»ƒm tra cáº¥u hÃ¬nh máº¡ng trong Metamask (RPC URL: http://localhost:7545, Chain ID: 1337)
   - LÃ m má»›i trang vÃ  thá»­ láº¡i

2. **Lá»—i káº¿t ná»‘i cÆ¡ sá»Ÿ dá»¯ liá»‡u**:
   - Kiá»ƒm tra XAMPP Ä‘ang cháº¡y vÃ  dá»‹ch vá»¥ MySQL Ä‘ang hoáº¡t Ä‘á»™ng
   - XÃ¡c minh thÃ´ng tin káº¿t ná»‘i trong file `.env` lÃ  chÃ­nh xÃ¡c
   - Kiá»ƒm tra cÆ¡ sá»Ÿ dá»¯ liá»‡u vÃ  báº£ng Ä‘Ã£ Ä‘Æ°á»£c táº¡o Ä‘Ãºng cÃ¡ch

3. **Lá»—i há»£p Ä‘á»“ng thÃ´ng minh**:
   - Äáº£m báº£o Ganache Ä‘ang cháº¡y vÃ  cÃ³ sáºµn cÃ¡c tÃ i khoáº£n
   - Thá»­ triá»ƒn khai láº¡i há»£p Ä‘á»“ng vá»›i `truffle migrate --reset`
   - Kiá»ƒm tra Ä‘á»‹a chá»‰ há»£p Ä‘á»“ng trong file `app.js` Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t

4. **Lá»—i "Out of Gas"**:
   - Kiá»ƒm tra tÃ i khoáº£n Metamask cÃ³ Ä‘á»§ ETH
   - Äáº£m báº£o máº¡ng Ä‘Æ°á»£c cáº¥u hÃ¬nh Ä‘Ãºng
   - Thá»­ láº¡i vá»›i má»™t tÃ i khoáº£n khÃ¡c tá»« Ganache

## Cáº¥u trÃºc mÃ£

    â”œâ”€â”€ blockchain-voting-dapp            # ThÆ° má»¥c gá»‘c cá»§a dá»± Ã¡n.
        â”œâ”€â”€ build                         # ThÆ° má»¥c chá»©a cÃ¡c artifact há»£p Ä‘á»“ng Ä‘Ã£ biÃªn dá»‹ch.
        |   â””â”€â”€ contracts                 
        |       â”œâ”€â”€ Migrations.json       
        |       â””â”€â”€ Voting.json           
        â”œâ”€â”€ contracts                     # ThÆ° má»¥c chá»©a mÃ£ nguá»“n há»£p Ä‘á»“ng thÃ´ng minh.
        |   â”œâ”€â”€ 2_deploy_contracts.js     
        |   â”œâ”€â”€ Migrations.sol            
        |   â””â”€â”€ Voting.sol                
        â”œâ”€â”€ Database_API                  # MÃ£ API cho giao tiáº¿p cÆ¡ sá»Ÿ dá»¯ liá»‡u.
        |   â””â”€â”€ main.py                   
        â”œâ”€â”€ migrations                    # Script triá»ƒn khai há»£p Ä‘á»“ng Ethereum.
        |   â””â”€â”€ 1_initial_migration.js    
        â”œâ”€â”€ node_modules                  # Module vÃ  phá»¥ thuá»™c Node.js.
        â”œâ”€â”€ public                        # TÃ i sáº£n cÃ´ng khai nhÆ° favicon.
        |   â””â”€â”€ favicon.ico               
        â”œâ”€â”€ src                           
        |   â”œâ”€â”€ assets                    # HÃ¬nh áº£nh dá»± Ã¡n.
        |   |   â””â”€â”€ eth5.jpg              
        |   â”œâ”€â”€ css                       # Stylesheet CSS.
        |   |   â”œâ”€â”€ admin.css             
        |   |   â”œâ”€â”€ index.css             
        |   |   â””â”€â”€ login.css             
        |   â”œâ”€â”€ dist                      # Bundle JavaScript Ä‘Ã£ biÃªn dá»‹ch.
        |   |   â”œâ”€â”€ app.bundle.js         
        |   |   â””â”€â”€ login.bundle.js       
        |   â”œâ”€â”€ html                      # Template HTML.
        |   |   â”œâ”€â”€ admin.html            
        |   |   â”œâ”€â”€ index.html            
        |   |   â””â”€â”€ login.html            
        |   â””â”€â”€ js                        # File logic JavaScript.
        |       â”œâ”€â”€ app.js                
        |       â””â”€â”€ login.js              
        â”œâ”€â”€ index.js                      # Äiá»ƒm vÃ o chÃ­nh cho á»©ng dá»¥ng Node.js.
        â”œâ”€â”€ package.json                  # Cáº¥u hÃ¬nh gÃ³i Node.js.
        â”œâ”€â”€ package-lock.json             # Lockfile cho phá»¥ thuá»™c gÃ³i.
        â”œâ”€â”€ README.md                     # TÃ i liá»‡u dá»± Ã¡n.
        â””â”€â”€ truffle-config.js             # File cáº¥u hÃ¬nh Truffle.

## Giáº¥y phÃ©p

MÃ£ trong repository nÃ y Ä‘Æ°á»£c cáº¥p phÃ©p theo Giáº¥y phÃ©p MIT. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  báº¡n Ä‘Æ°á»£c tá»± do sá»­ dá»¥ng, sá»­a Ä‘á»•i vÃ  phÃ¢n phá»‘i mÃ£, miá»…n lÃ  báº¡n bao gá»“m thÃ´ng bÃ¡o báº£n quyá»n vÃ  giáº¥y phÃ©p gá»‘c.

## Náº¿u báº¡n thÃ­ch dá»± Ã¡n nÃ y, hÃ£y cho nÃ³ má»™t ğŸŒŸ.
## Cáº£m Æ¡n báº¡n ğŸ˜Š.
